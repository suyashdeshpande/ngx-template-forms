<div class="row">
  <ng-template ngFor [ngForOf]="fields" let-field let-i="index" [ngForTrackBy]="trackByFn">
    <ng-template [ngIf]="field.isVisible !== false">
      <div class="col-12 {{field.classNames}}">
        <div class="form-group" #parent>
          <ng-template [ngIf]="field.label">
            <label [for]="field.id">{{field.label}}
              <sup class="text-danger" *ngIf="field?.validators?.required">*</sup>
            </label>
          </ng-template>


          <ng-container [ngSwitch]="field.type">


            <ng-template ngSwitchCase="html">
              <div>{{field.content}}</div>
            </ng-template>


            <ng-template ngSwitchCase="image" [ngClass]="field.classNames || ''">
              image
            </ng-template>

            <!--Select-->

            <ng-template ngSwitchCase="select" [ngClass]="field.classNames || ''">
              <ngx-select [placeholder]="field.placeholder" [options]="field.options" [id]="field.id"
                          [name]="field.name" [(ngModel)]="field.value" [prefix]="field.prefix" [suffix]="field.suffix"
                          [closeOnSelect]="field.closeOnSelect" [canAdd]="field.canAdd"
                          (selectChange)="valueChanged()" [form]="form"
                          [validatorConfig]="field.validators"></ngx-select>
            </ng-template>


            <ng-template ngSwitchCase="multiple-select" [ngClass]="field.classNames || ''">
              <ngx-multiple-select [placeholder]="field.placeholder" [options]="field.options" [id]="field.id"
                                   [name]="field.name" [(ngModel)]="field.value" [prefix]="field.prefix"
                                   [suffix]="field.suffix" [closeOnSelect]="field.closeOnSelect"
                                   [canAdd]="field.canAdd" (selectChange)="valueChanged()"
                                   [form]="form" [validatorConfig]="form"></ngx-multiple-select>
            </ng-template>

            <!--Textarea-->

            <ng-template ngSwitchCase="textarea" [ngClass]="field.classNames || ''">
              <ngx-textarea [placeholder]="field.placeholder" [name]="field.name" [id]="field.id"
                            [(ngModel)]="field.value" (changeEmit)="valueChanged()" [form]="form"
                            [validatorConfig]="field.validators"></ngx-textarea>
            </ng-template>


            <ng-template ngSwitchCase="checkbox" [ngClass]="field.classNames || ''">
              checkbox
            </ng-template>


            <ng-template ngSwitchCase="radio" [ngClass]="field.classNames || ''">
              <ng-template ngFor [ngForOf]="field.options" let-option let-j="index">

                <div class="custom-control custom-radio">
                  <input type="radio" class="custom-control-input" [(ngModel)]="field.value" [value]="option.value"
                         [id]="option.id"
                         [name]="field.name" (input)="valueChanged($event, field)">
                  <label class="custom-control-label" [for]="option.id">{{ option.label }}</label>
                </div>
              </ng-template>
              <!--<ngx-radio [options]="field.options" [(ngModel)]="field.value" [name]="field.name"-->
              <!--(changeEmit)="valueChanged()"></ngx-radio>-->
            </ng-template>

            <!--Date-->

            <ng-template ngSwitchCase="date" [ngClass]="field.classNames || ''">
              <ngx-date [placeholder]="field.placeholder" [name]="field.name" [id]="field.id"
                        [dateFormat]="'MMM DD, YYYY'" [(ngModel)]="field.value"
                        (changeEmit)="valueChanged()" [form]="form" [validatorConfig]="field.validators"></ngx-date>
            </ng-template>

            <!--Time-->

            <ng-template ngSwitchCase="time" [ngClass]="field.classNames || ''">
              <ngx-time [placeholder]="field.placeholder" [name]="field.name" [id]="field.id"
                        [form]="form" [validatorConfig]="field.validators"
                        [timeFormat]="'hh:mm a'" [(ngModel)]="field.value" (changeEmit)="valueChanged()"></ngx-time>
            </ng-template>

            <!--Password-->

            <ng-template ngSwitchCase="password" [ngClass]="field.classNames || ''">
              <ngx-password [placeholder]="field.placeholder" [name]="field.name" [id]="field.id"
                            (changeEmit)="valueChanged()" [form]="form" [validatorConfig]="field.validators"
                            [(ngModel)]="field.value"></ngx-password>
            </ng-template>

            <!--Default-->

            <ng-template ngSwitchDefault [ngClass]="field.classNames || ''">
              <ngx-input [name]="field.name" [id]="field.id" [placeholder]="field.placeholder || ''"
                         [hint]="field.hint || ''"
                         [prefix]="field.prefix || ''" [suffix]="field.suffix || ''" [type]="field.type"
                         [(ngModel)]="field.value" (changeEmit)="valueChanged()" [form]="form"
                         [validatorConfig]="field.validators"></ngx-input>
            </ng-template>


          </ng-container>


        </div>
      </div>
    </ng-template>
  </ng-template>
</div>
